import React, { useState } from 'react';
import { COLUMNS, SPECIALISTS, DAILY_OVERHEAD } from '../types';

const GameInstructions = () => {
  const [isOpen, setIsOpen] = useState(false);

  return (
    <div className="bg-white rounded-lg shadow-md p-6 mb-6" style={{ borderLeft: '4px solid #EC6428' }}>
      <button
        onClick={() => setIsOpen(!isOpen)}
        className="w-full flex items-center justify-between text-left"
      >
        <h2 className="text-xl font-bold" style={{ color: '#1B1918', fontFamily: 'Montserrat, sans-serif' }}>
          üìñ –ö–∞–∫ –∏–≥—Ä–∞—Ç—å
        </h2>
        <span className="text-gray-600">{isOpen ? '‚ñº' : '‚ñ∂'}</span>
      </button>

      {isOpen && (
        <div className="mt-4 space-y-4 text-gray-700">
          <div>
            <h3 className="font-semibold text-gray-800 mb-2">–¶–µ–ª—å –∏–≥—Ä—ã:</h3>
            <p className="text-sm">
              –£—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –º–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–∏—Å—Ç—É—é –ø—Ä–∏–±—ã–ª—å. 
              –ù–∞—á–∞–ª—å–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª: 5 –º–ª—Ä–¥ —Ä—É–±–ª–µ–π.
            </p>
          </div>

          <div>
            <h3 className="font-semibold text-gray-800 mb-2">–ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤:</h3>
            <ul className="text-sm space-y-2 list-disc list-inside">
              <li>
                <strong>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã:</strong> {DAILY_OVERHEAD.toLocaleString('ru-RU')} ‚ÇΩ –≤ –¥–µ–Ω—å
              </li>
              <li>
                <strong>–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –≤ –¥–µ–Ω—å:</strong> {Math.round(DAILY_OVERHEAD / Object.values(SPECIALISTS).reduce((sum, spec) => sum + spec.count, 0)).toLocaleString('ru-RU')} ‚ÇΩ
                <span className="text-gray-500 ml-1">
                  (–≤—Å–µ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤: {Object.values(SPECIALISTS).reduce((sum, spec) => sum + spec.count, 0)})
                </span>
              </li>
              <li>
                –ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –≤–∫–ª—é—á–∞—é—Ç –∑–∞—Ä–ø–ª–∞—Ç—ã –≤—Å–µ—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤, –∞—Ä–µ–Ω–¥—É –æ—Ñ–∏—Å–∞, –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ –∏ –¥—Ä—É–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –ø—Ä–æ–µ–∫—Ç–∞.
              </li>
            </ul>
          </div>

          <div>
            <h3 className="font-semibold text-gray-800 mb-2">–û–±—ä—ë–º —Ä–∞–±–æ—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞:</h3>
            <ul className="text-sm space-y-2 list-disc list-inside">
              <li>
                <strong>–ë–∞–∑–æ–≤—ã–π –æ–±—ä—ë–º —Ä–∞–±–æ—Ç—ã:</strong> –ö–∞–∂–¥—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –±—Ä–æ—Å–∞–µ—Ç –∫—É–±–∏–∫ (1-6 –µ–¥–∏–Ω–∏—Ü —Ä–∞–±–æ—Ç—ã) –∑–∞ –¥–µ–Ω—å
              </li>
              <li>
                <strong>–ë–æ–Ω—É—Å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:</strong> –ï—Å–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–≤–æ–µ–π –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–ª–æ–Ω–∫–µ, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å √ó2
                <span className="text-gray-500 ml-1">(–Ω–∞–ø—Ä–∏–º–µ—Ä, –ò–Ω–∂–µ–Ω–µ—Ä-–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤—â–∏–∫ –≤ –∫–æ–ª–æ–Ω–∫–µ "–†–∞–±–æ—á–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è")</span>
              </li>
              <li>
                <strong>–í–ª–∏—è–Ω–∏–µ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞:</strong> –û–±—ä—ë–º —Ä–∞–±–æ—Ç—ã —É–º–Ω–æ–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–¥—Ä—è–¥—á–∏–∫–∞:
                <ul className="ml-4 mt-1 list-disc">
                  <li>–ü—Ä–µ–º–∏—É–º-–ø–æ–¥—Ä—è–¥—á–∏–∫: √ó2.0 (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ 2 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ)</li>
                  <li>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π: √ó1.0 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å)</li>
                  <li>–ë—é–¥–∂–µ—Ç–Ω—ã–π: √ó0.6 (—Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–µ–µ)</li>
                </ul>
              </li>
              <li>
                <strong>–ü—Ä–∏–º–µ—Ä:</strong> –ò–Ω–∂–µ–Ω–µ—Ä-–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤—â–∏–∫ –≤ —Å–≤–æ–µ–π –∫–æ–ª–æ–Ω–∫–µ —Å –ø—Ä–µ–º–∏—É–º-–ø–æ–¥—Ä—è–¥—á–∏–∫–æ–º:
                <br />
                <span className="ml-4 text-gray-600">
                  –ö—É–±–∏–∫ (4) √ó –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (√ó2) √ó –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–¥—Ä—è–¥—á–∏–∫–∞ (√ó2) = 16 –µ–¥–∏–Ω–∏—Ü —Ä–∞–±–æ—Ç—ã –∑–∞ –¥–µ–Ω—å
                </span>
              </li>
              <li>
                <strong>–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞:</strong> –ù–∞ –æ–¥–Ω—É –∑–∞–¥–∞—á—É –º–æ–∂–Ω–æ –Ω–∞–∑–Ω–∞—á–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. 
                –ò—Ö —Ä–∞–±–æ—Ç–∞ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è.
              </li>
            </ul>
          </div>

          <div>
            <h3 className="font-semibold text-gray-800 mb-2">–ú–µ—Ö–∞–Ω–∏–∫–∞ –∏–≥—Ä—ã:</h3>
            <ul className="text-sm space-y-2 list-disc list-inside">
              <li>
                <strong>–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á:</strong> –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–¥–∞—á –¢–û–õ–¨–ö–û –∏–∑ –∫–æ–ª–æ–Ω–∫–∏ "–ë—ç–∫–ª–æ–≥" –≤ –∫–æ–ª–æ–Ω–∫—É "–ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É". 
                –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –º–µ–∂–¥—É –¥—Ä—É–≥–∏–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã.
              </li>
              <li>
                <strong>WIP –ª–∏–º–∏—Ç—ã:</strong> –†–∞–±–æ—á–∏–µ –∫–æ–ª–æ–Ω–∫–∏ (3-7) –∏–º–µ—é—Ç –ª–∏–º–∏—Ç –≤ 3 –∑–∞–¥–∞—á–∏. 
                –ï—Å–ª–∏ –ª–∏–º–∏—Ç –ø—Ä–µ–≤—ã—à–µ–Ω, –∫–æ–ª–æ–Ω–∫–∞ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è –∫—Ä–∞—Å–Ω—ã–º, –∏ –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã.
              </li>
              <li>
                <strong>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤:</strong> –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ —Å –ø–∞–Ω–µ–ª–∏ "–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã" –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É –∑–∞–¥–∞—á–∏ –≤ —Ä–∞–±–æ—á–µ–π –∫–æ–ª–æ–Ω–∫–µ. 
                –ù–∞ –æ–¥–Ω—É –∑–∞–¥–∞—á—É –º–æ–∂–Ω–æ –Ω–∞–∑–Ω–∞—á–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ò—Ö —Ä–∞–±–æ—Ç–∞ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è.
              </li>
              <li>
                <strong>–°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å:</strong> –ü–æ—Å–ª–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –Ω–∞–∂–º–∏—Ç–µ "–°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å". 
                –°–∏—Å—Ç–µ–º–∞ –±—Ä–æ—Å–∞–µ—Ç –∫—É–±–∏–∫ (1-6) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ä–∞–±–æ—Ç—É –∫ –∑–∞–¥–∞—á–∞–º. 
                –†–∞–±–æ—Ç–∞ —É–º–Ω–æ–∂–∞–µ—Ç—Å—è –Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ (√ó2 –≤ —Å–≤–æ–µ–π –∫–æ–ª–æ–Ω–∫–µ) –∏ —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–¥—Ä—è–¥—á–∏–∫–∞.
              </li>
              <li>
                <strong>–§–∏–Ω–∞–Ω—Å—ã:</strong> 
                <ul className="ml-4 mt-1 list-disc">
                  <li>–†–∞—Å—Ö–æ–¥—ã —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –∑–∞–¥–∞—á–∏ (–ø–µ—Ä–µ—Ö–æ–¥ –∏–∑ "–ì–æ—Ç–æ–≤–æ" –≤ –ø–µ—Ä–≤—É—é —Ä–∞–±–æ—á—É—é –∫–æ–ª–æ–Ω–∫—É)</li>
                  <li>–î–æ—Ö–æ–¥ –ø–æ—Å—Ç—É–ø–∞–µ—Ç –ø—Ä–∏ —Å–¥–∞—á–µ –∑–∞–¥–∞—á–∏ (–ø–µ—Ä–µ—Ö–æ–¥ –≤ "–ü—Ä–∏—ë–º–∫–∞ –∏ —Å–¥–∞—á–∞")</li>
                  <li>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã: {DAILY_OVERHEAD.toLocaleString('ru-RU')} ‚ÇΩ (–≤–∫–ª—é—á–∞—é—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤—Å–µ—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤)</li>
                  <li>–ü—Ä–∏–±—ã–ª—å = –î–æ—Ö–æ–¥—ã - –ü—Ä—è–º—ã–µ —Ä–∞—Å—Ö–æ–¥—ã - –ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</li>
                </ul>
              </li>
              <li>
                <strong>–í—ã–±–æ—Ä –ø–æ–¥—Ä—è–¥—á–∏–∫–∞:</strong> –î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥—Ä—è–¥—á–∏–∫–∞ (–¥–æ –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã). 
                –ü–æ–¥—Ä—è–¥—á–∏–∫ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–¥–∞—á–∏:
                <ul className="ml-4 mt-1 list-disc">
                  <li>–ü—Ä–µ–º–∏—É–º: –±—ã—Å—Ç—Ä–æ (√ó2), –¥–æ—Ä–æ–≥–æ (+50% –∫ —Å—Ç–æ–∏–º–æ—Å—Ç–∏, +10% –∫ –¥–æ—Ö–æ–¥—É –∑–∞ –∫–∞—á–µ—Å—Ç–≤–æ)</li>
                  <li>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π: —Å—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏ —Ü–µ–Ω–∞</li>
                  <li>–ë—é–¥–∂–µ—Ç–Ω—ã–π: –º–µ–¥–ª–µ–Ω–Ω–æ (√ó0.6), –¥–µ—à–µ–≤–æ (-30% –∫ —Å—Ç–æ–∏–º–æ—Å—Ç–∏)</li>
                </ul>
              </li>
              <li>
                <strong>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:</strong> –£ –≤–∞—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤. 
                –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–±—ã–ª–∏.
              </li>
            </ul>
          </div>

          <div>
            <h3 className="font-semibold text-gray-800 mb-2">–≠—Ç–∞–ø—ã –ø—Ä–æ–µ–∫—Ç–∞ (Kanban –∫–æ–ª–æ–Ω–∫–∏):</h3>
            <ol className="text-sm space-y-1 list-decimal list-inside">
              {COLUMNS.map((col, index) => (
                <li key={col.id}>
                  <strong>{col.name}</strong>
                  {col.wipLimit && ` (WIP –ª–∏–º–∏—Ç: ${col.wipLimit})`}
                </li>
              ))}
            </ol>
          </div>

          <div>
            <h3 className="font-semibold text-gray-800 mb-2">–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã –∏ –∏—Ö –∑–æ–Ω—ã –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:</h3>
            <ul className="text-sm space-y-1 list-disc list-inside">
              {Object.values(SPECIALISTS).map((spec) => {
                const primaryColumn = spec.primaryColumn 
                  ? COLUMNS.find(col => col.id === spec.primaryColumn)
                  : null;
                return (
                  <li key={spec.id}>
                    <strong>{spec.name}</strong> ({spec.count} —à—Ç.) 
                    {primaryColumn ? ` ‚Üí ${primaryColumn.name} (—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å √ó2)` : ' ‚Üí –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–µ–∑–¥–µ, –Ω–æ –±–µ–∑ –±–æ–Ω—É—Å–∞'}
                  </li>
                );
              })}
            </ul>
          </div>

          <div className="bg-blue-50 border border-blue-200 rounded p-3">
            <p className="text-sm text-blue-800">
              <strong>üí° –°–æ–≤–µ—Ç:</strong> –ù–∞–∑–Ω–∞—á–∞–π—Ç–µ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –≤ –∏—Ö –∑–æ–Ω–∞—Ö –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (√ó2). 
              –ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ —Ä–∞–±–æ—Ç—É —Ç–∞–∫, —á—Ç–æ–±—ã –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–∏ –∏ –º–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–±—ã–ª—å. 
              –ü–æ–º–Ω–∏—Ç–µ: –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å—Ç–æ–∏—Ç –¥–µ–Ω–µ–≥!
            </p>
          </div>
        </div>
      )}
    </div>
  );
};

export default GameInstructions;
